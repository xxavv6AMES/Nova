<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova - by xxavv6AMES</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;700&family=Wix+Madefor+Display&display=swap" rel="stylesheet">
    <style>
        :root {
            --nova-primary: #6d28d9;
            --nova-secondary: #4c1d95;
            --nova-accent: #7c3aed;
            --nova-text: #e2e8f0;
        }

        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%);
            color: var(--nova-text);
            min-height: 100vh;
            font-family: 'Wix Madefor Display', sans-serif;
        }

        h1, h2, h3, .main-font {
            font-family: 'Public Sans', sans-serif;
            letter-spacing: -0.125em;
        }

        .nova-card {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid var(--nova-accent);
            transition: all 0.3s ease;
        }

        .nova-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 20px var(--nova-accent);
        }

        .nova-button {
            background: var(--nova-primary);
            transition: all 0.3s ease;
        }

        .nova-button:hover {
            background: var(--nova-accent);
            box-shadow: 0 0 15px var(--nova-accent);
        }

        .update-badge {
            background: #22c55e;
            position: absolute;
            top: -8px;
            right: -8px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .star-field {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration) infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }

        .rating {
            display: inline-flex;
            flex-direction: row-reverse;
        }

        .rating input {
            display: none;
        }

        .rating label {
            color: #ddd;
            font-size: 1.5rem;
            padding: 0 0.1em;
            cursor: pointer;
        }

        .rating label:hover,
        .rating label:hover ~ label,
        .rating input:checked ~ label {
            color: #ffc107;
        }
    </style>
</head>
<body>
    <div class="star-field" id="starField"></div>

    <header class="py-6 px-4">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <h1 class="text-4xl font-bold bg-gradient-to-r from-purple-500 to-indigo-500 bg-clip-text text-transparent">
                    NOVA
                </h1>
                <span class="text-sm text-gray-400">by xxavv6AMES</span>
            </div>
            <nav class="space-x-6">
                <a href="#" class="hover:text-purple-400 transition-colors">Store</a>
                <a href="#" class="hover:text-purple-400 transition-colors">Library</a>
                <a href="#" class="hover:text-purple-400 transition-colors">Community</a>
                <a href="#" class="hover:text-purple-400 transition-colors" id="loginBtn">Login</a>
            </nav>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-2xl font-semibold">Featured & Recommended</h2>
            <div class="flex space-x-4">
                <select id="sortSelect" class="nova-button px-4 py-2 rounded-lg">
                    <option value="latest">Sort by: Latest</option>
                    <option value="rating">Sort by: Rating</option>
                    <option value="name">Sort by: Name</option>
                </select>
                <select id="filterSelect" class="nova-button px-4 py-2 rounded-lg">
                    <option value="all">All Categories</option>
                    <option value="Application">Applications</option>
                    <option value="Game">Games</option>
                </select>
                <input type="text" id="searchInput" placeholder="Search..." class="px-4 py-2 rounded-lg bg-gray-700 text-white">
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="appGrid">
            <!-- App cards will be dynamically inserted here -->
        </div>
    </main>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center">
        <div class="bg-gray-800 p-8 rounded-lg">
            <h2 class="text-2xl mb-4">Login</h2>
            <input type="text" placeholder="Username" class="block w-full p-2 mb-4 bg-gray-700 rounded">
            <input type="password" placeholder="Password" class="block w-full p-2 mb-4 bg-gray-700 rounded">
            <button class="nova-button px-4 py-2 rounded-lg w-full">Login</button>
            <button id="closeLoginModal" class="mt-4 text-gray-400 hover:text-white">Close</button>
        </div>
    </div>

    <!-- App Details Modal -->
    <div id="appDetailsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center">
        <div class="bg-gray-800 p-8 rounded-lg max-w-2xl w-full">
            <h2 id="appDetailsName" class="text-2xl mb-4"></h2>
            <img id="appDetailsImage" class="w-full h-48 object-cover mb-4 rounded" src="" alt="">
            <p id="appDetailsDescription" class="mb-4"></p>
            <div id="appDetailsRating" class="mb-4"></div>
            <div id="appDetailsReviews" class="mb-4"></div>
            <button id="closeAppDetailsModal" class="nova-button px-4 py-2 rounded-lg">Close</button>
        </div>
    </div>

    <script>
        // Configuration object for your apps
        const apps = [
            {
                name: 'Example App',
                repo: 'xxavv6AMES/example-app',
                description: 'An example app to demonstrate GitHub integration',
                image: 'https://via.placeholder.com/400x200',
                category: 'Application',
                rating: 4.5,
                reviews: [
                    { user: 'User1', rating: 5, comment: 'Great app!' },
                    { user: 'User2', rating: 4, comment: 'Pretty good, but could use some improvements.' }
                ]
            },
            {
                name: 'Cool Game',
                repo: 'xxavv6AMES/cool-game',
                description: 'An exciting game for all ages',
                image: 'https://via.placeholder.com/400x200',
                category: 'Game',
                rating: 4.8,
                reviews: [
                    { user: 'Gamer1', rating: 5, comment: 'Addictive gameplay!' },
                    { user: 'Gamer2', rating: 4.5, comment: 'Fun, but needs more levels.' }
                ]
            }
            // Add more apps here
        ];

        // Create starfield effect
        function createStarField() {
            const starField = document.getElementById('starField');
            const numberOfStars = 100;

            for (let i = 0; i < numberOfStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                
                // Random position
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                
                // Random size
                const size = Math.random() * 3;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                // Random twinkle duration
                star.style.setProperty('--duration', `${2 + Math.random() * 3}s`);
                
                starField.appendChild(star);
            }
        }

        // Fetch GitHub release information
        async function fetchLatestRelease(repo) {
            try {
                const response = await fetch(`https://api.github.com/repos/${repo}/releases/latest`);
                if (!response.ok) throw new Error('Failed to fetch release');
                return await response.json();
            } catch (error) {
                console.error(`Error fetching release for ${repo}:`, error);
                return null;
            }
        }

        // Create app card
        function createAppCard(app, releaseInfo) {
            const hasUpdate = releaseInfo && releaseInfo.tag_name !== app.currentVersion;
            
            return `
                <div class="nova-card rounded-lg overflow-hidden relative" data-category="${app.category}" data-name="${app.name}" data-rating="${app.rating}">
                    ${hasUpdate ? '<span class="update-badge px-2 py-1 rounded-full text-xs text-white">Update Available</span>' : ''}
                    <img src="${app.image}" alt="${app.name}" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h3 class="text-xl font-semibold mb-2">${app.name}</h3>
                        <p class="text-gray-400 mb-4">${app.description}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-sm bg-purple-900 px-2 py-1 rounded">${app.category}</span>
                            <div class="flex items-center">
                                <span class="mr-2">⭐ ${app.rating.toFixed(1)}</span>
                                <button class="nova-button px-4 py-2 rounded-lg view-details" data-app-name="${app.name}">
                                    View Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Initialize the app
        async function initializeStore() {
            createStarField();
            
            const appGrid = document.getElementById('appGrid');
            
            // Fetch all release information and create cards
            for (const app of apps) {
                const releaseInfo = await fetchLatestRelease(app.repo);
                const cardHTML = createAppCard(app, releaseInfo);
                appGrid.innerHTML += cardHTML;
            }

            // Add event listeners for sorting, filtering, and searching
            document.getElementById('sortSelect').addEventListener('change', sortApps);
            document.getElementById('filterSelect').addEventListener('change', filterApps);
            document.getElementById('searchInput').addEventListener('input', searchApps);

            // Add event listeners for view details buttons
            document.querySelectorAll('.view-details').forEach(button => {
                button.addEventListener('click', showAppDetails);
            });

            // Add event listeners for login modal
            document.getElementById('loginBtn').addEventListener('click', showLoginModal);
            document.getElementById('closeLoginModal').addEventListener('click', closeLoginModal);

            // Add event listener for closing app details modal
            document.getElementById('closeAppDetailsModal').addEventListener('click', closeAppDetailsModal);
        }

        function sortApps() {
            const sortBy = document.getElementById('sortSelect').value;
            const appGrid = document.getElementById('appGrid');
            const appCards = Array.from(appGrid.children);

            appCards.sort((a, b) => {
                if (sortBy === 'latest') {
                    return 0; // Assuming the current order is already by latest
                } else if (sortBy === 'rating') {
                    return b.dataset.rating - a.dataset.rating;
                } else if (sortBy === 'name') {
                    return a.dataset.name.localeCompare(b.dataset.name);
                }
            });

            appGrid.innerHTML = '';
            appCards.forEach(card => appGrid.appendChild(card));
        }

        function filterApps() {
            const filterBy = document.getElementById('filterSelect').value;
            const appCards = document.querySelectorAll('#appGrid > div');

            appCards.forEach(card => {
                if (filterBy === 'all' || card.dataset.category === filterBy) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function searchApps() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const appCards = document.querySelectorAll('#appGrid > div');

            appCards.forEach(card => {
                const appName = card.dataset.name.toLowerCase();
                if (appName.includes(searchTerm)) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function showAppDetails(event) {
            const appName = event.target.dataset.appName;
            const app = apps.find(a => a.name === appName);

            if (app) {
                document.getElementById('appDetailsName').textContent = app.name;
                document.getElementById('appDetailsImage').src = app.image;
                document.getElementById('appDetailsDescription').textContent = app.description;
                document.getElementById('appDetailsRating').innerHTML = `Rating: ${app.rating.toFixed(1)} ⭐`;

                const reviewsHTML = app.reviews.map(review => `
                    <div class="mb-2">
                        <strong>${review.user}</strong> - ${review.rating} ⭐
                        <p>${review.comment}</p>
                    </div>
                `).join('');
                document.getElementById('appDetailsReviews').innerHTML = `
            <h3 class="text-xl mb-2">Reviews:</h3>
            ${reviewsHTML}
        `;

        document.getElementById('appDetailsModal').style.display = 'flex';
    }
}

function closeAppDetailsModal() {
    document.getElementById('appDetailsModal').style.display = 'none';
}

function showLoginModal() {
    document.getElementById('loginModal').style.display = 'flex';
}

function closeLoginModal() {
    document.getElementById('loginModal').style.display = 'none';
}

// Function to create a new app template
function createNewAppTemplate() {
    const newAppWindow = window.open('', 'New App Template', 'width=400,height=300');
    newAppWindow.document.write(`
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>New App Template</title>
            <style>
                body { font-family: Arial, sans-serif; padding: 20px; }
                label { display: block; margin-top: 10px; }
                input, textarea { width: 100%; padding: 5px; margin-top: 5px; }
                button { margin-top: 10px; padding: 5px 10px; }
            </style>
        </head>
        <body>
            <h2>New App Template</h2>
            <form id="newAppForm">
                <label for="appName">App Name:</label>
                <input type="text" id="appName" required>
                
                <label for="appDescription">Description:</label>
                <textarea id="appDescription" required></textarea>
                
                <label for="appCategory">Category:</label>
                <select id="appCategory">
                    <option value="Application">Application</option>
                    <option value="Game">Game</option>
                </select>
                
                <button type="submit">Create App</button>
            </form>
            <script>
                document.getElementById('newAppForm').addEventListener('submit', function(e) {
                    e.preventDefault();
                    const newApp = {
                        name: document.getElementById('appName').value,
                        description: document.getElementById('appDescription').value,
                        category: document.getElementById('appCategory').value,
                        image: 'https://via.placeholder.com/400x200',
                        rating: 0,
                        reviews: []
                    };
                    window.opener.addNewApp(newApp);
                    window.close();
                });
            </script>
        </body>
        </html>
    `);
}

// Function to add a new app to the main window
function addNewApp(newApp) {
    apps.push(newApp);
    const appGrid = document.getElementById('appGrid');
    const cardHTML = createAppCard(newApp, null);
    appGrid.innerHTML += cardHTML;
    
    // Re-add event listener for the new card
    const newCard = appGrid.lastElementChild;
    newCard.querySelector('.view-details').addEventListener('click', showAppDetails);
}

// Start the app
document.addEventListener('DOMContentLoaded', () => {
    initializeStore();
    
    // Add "Create New App" button
    const createNewAppBtn = document.createElement('button');
    createNewAppBtn.textContent = 'Create New App';
    createNewAppBtn.className = 'nova-button px-4 py-2 rounded-lg mt-4';
    createNewAppBtn.addEventListener('click', createNewAppTemplate);
    document.querySelector('main').appendChild(createNewAppBtn);
});
    </script>
</body>
</html>